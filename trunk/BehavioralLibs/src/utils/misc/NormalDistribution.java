package utils.misc;

import java.util.TreeMap;
import exceptions.*;

public class NormalDistribution {
	private static NormalDistribution _singleton = null;
	private TreeMap<Double, Double> Table;
	
	public static NormalDistribution singleton(){
		if (NormalDistribution._singleton == null) NormalDistribution._singleton = new NormalDistribution();
		return NormalDistribution._singleton;
	}
	
	//метод получения значения функции, обратной функции нормального распределения
	//точности до 0.01 нам вполне хватит
	public double getCoordinate(double value) throws VarianceOutOfBounds {
		if (value > 1.0 || value < 0.0) throw new VarianceOutOfBounds();
		double result = 0.0;
		boolean isNegative = false;
		if (value < 0.5){
			value = 1.0 - value;
			isNegative = true;
		}
		
		if (Table.containsKey(value)){
			result = Table.get(value);
		}
		else{
				result = Table.get(Table.floorKey(value));
		}
		
		return isNegative ? -result : result;
	}
	private NormalDistribution(){
		//а нам похрену: мы пихнем таблицу нормального распределения
		Table = new TreeMap();
		Table.put(0.5,0.0);
		Table.put(0.50399,0.01);
		Table.put(0.50798,0.02);
		Table.put(0.51197,0.03);
		Table.put(0.51595,0.04);
		Table.put(0.51994,0.05);
		Table.put(0.52392,0.06);
		Table.put(0.5279,0.07);
		Table.put(0.53188,0.08);
		Table.put(0.53586,0.09);
		Table.put(0.53983,0.1);
		Table.put(0.5438,0.11);
		Table.put(0.54776,0.12);
		Table.put(0.55172,0.13);
		Table.put(0.55567,0.14);
		Table.put(0.55962,0.15);
		Table.put(0.56356,0.16);
		Table.put(0.56749,0.17);
		Table.put(0.57142,0.18);
		Table.put(0.57535,0.19);
		Table.put(0.57926,0.2);
		Table.put(0.58317,0.21);
		Table.put(0.58706,0.22);
		Table.put(0.59095,0.23);
		Table.put(0.59483,0.24);
		Table.put(0.59871,0.25);
		Table.put(0.60257,0.26);
		Table.put(0.60642,0.27);
		Table.put(0.61026,0.28);
		Table.put(0.61409,0.29);
		Table.put(0.61791,0.3);
		Table.put(0.62172,0.31);
		Table.put(0.62552,0.32);
		Table.put(0.6293,0.33);
		Table.put(0.63307,0.34);
		Table.put(0.63683,0.35);
		Table.put(0.64058,0.36);
		Table.put(0.64431,0.37);
		Table.put(0.64803,0.38);
		Table.put(0.65173,0.39);
		Table.put(0.65542,0.4);
		Table.put(0.6591,0.41);
		Table.put(0.66276,0.42);
		Table.put(0.6664,0.43);
		Table.put(0.67003,0.44);
		Table.put(0.67364,0.45);
		Table.put(0.67724,0.46);
		Table.put(0.68082,0.47);
		Table.put(0.68439,0.48);
		Table.put(0.68793,0.49);
		Table.put(0.69146,0.5);
		Table.put(0.69497,0.51);
		Table.put(0.69847,0.52);
		Table.put(0.70194,0.53);
		Table.put(0.7054,0.54);
		Table.put(0.70884,0.55);
		Table.put(0.71226,0.56);
		Table.put(0.71566,0.57);
		Table.put(0.71904,0.58);
		Table.put(0.7224,0.59);
		Table.put(0.72575,0.6);
		Table.put(0.72907,0.61);
		Table.put(0.73237,0.62);
		Table.put(0.73565,0.63);
		Table.put(0.73891,0.64);
		Table.put(0.74215,0.65);
		Table.put(0.74537,0.66);
		Table.put(0.74857,0.67);
		Table.put(0.75175,0.68);
		Table.put(0.7549,0.69);
		Table.put(0.75804,0.7);
		Table.put(0.76115,0.71);
		Table.put(0.76424,0.72);
		Table.put(0.7673,0.73);
		Table.put(0.77035,0.74);
		Table.put(0.77337,0.75);
		Table.put(0.77637,0.76);
		Table.put(0.77935,0.77);
		Table.put(0.7823,0.78);
		Table.put(0.78524,0.79);
		Table.put(0.78814,0.8);
		Table.put(0.79103,0.81);
		Table.put(0.79389,0.82);
		Table.put(0.79673,0.83);
		Table.put(0.79955,0.84);
		Table.put(0.80234,0.85);
		Table.put(0.80511,0.86);
		Table.put(0.80785,0.87);
		Table.put(0.81057,0.88);
		Table.put(0.81327,0.89);
		Table.put(0.81594,0.9);
		Table.put(0.81859,0.91);
		Table.put(0.82121,0.92);
		Table.put(0.82381,0.93);
		Table.put(0.82639,0.94);
		Table.put(0.82894,0.95);
		Table.put(0.83147,0.96);
		Table.put(0.83398,0.97);
		Table.put(0.83646,0.98);
		Table.put(0.83891,0.99);
		Table.put(0.84134,1.0);
		Table.put(0.84375,1.01);
		Table.put(0.84614,1.02);
		Table.put(0.84849,1.03);
		Table.put(0.85083,1.04);
		Table.put(0.85314,1.05);
		Table.put(0.85543,1.06);
		Table.put(0.85769,1.07);
		Table.put(0.85993,1.08);
		Table.put(0.86214,1.09);
		Table.put(0.86433,1.1);
		Table.put(0.8665,1.11);
		Table.put(0.86864,1.12);
		Table.put(0.87076,1.13);
		Table.put(0.87286,1.14);
		Table.put(0.87493,1.15);
		Table.put(0.87698,1.16);
		Table.put(0.879,1.17);
		Table.put(0.881,1.18);
		Table.put(0.88298,1.19);
		Table.put(0.88493,1.2);
		Table.put(0.88686,1.21);
		Table.put(0.88877,1.22);
		Table.put(0.89065,1.23);
		Table.put(0.89251,1.24);
		Table.put(0.89435,1.25);
		Table.put(0.89617,1.26);
		Table.put(0.89796,1.27);
		Table.put(0.89973,1.28);
		Table.put(0.90147,1.29);
		Table.put(0.9032,1.3);
		Table.put(0.9049,1.31);
		Table.put(0.90658,1.32);
		Table.put(0.90824,1.33);
		Table.put(0.90988,1.34);
		Table.put(0.91149,1.35);
		Table.put(0.91309,1.36);
		Table.put(0.91466,1.37);
		Table.put(0.91621,1.38);
		Table.put(0.91774,1.39);
		Table.put(0.91924,1.4);
		Table.put(0.92073,1.41);
		Table.put(0.9222,1.42);
		Table.put(0.92364,1.43);
		Table.put(0.92507,1.44);
		Table.put(0.92647,1.45);
		Table.put(0.92785,1.46);
		Table.put(0.92922,1.47);
		Table.put(0.93056,1.48);
		Table.put(0.93189,1.49);
		Table.put(0.93319,1.5);
		Table.put(0.93448,1.51);
		Table.put(0.93574,1.52);
		Table.put(0.93699,1.53);
		Table.put(0.93822,1.54);
		Table.put(0.93943,1.55);
		Table.put(0.94062,1.56);
		Table.put(0.94179,1.57);
		Table.put(0.94295,1.58);
		Table.put(0.94408,1.59);
		Table.put(0.9452,1.6);
		Table.put(0.9463,1.61);
		Table.put(0.94738,1.62);
		Table.put(0.94845,1.63);
		Table.put(0.9495,1.64);
		Table.put(0.95053,1.65);
		Table.put(0.95154,1.66);
		Table.put(0.95254,1.67);
		Table.put(0.95352,1.68);
		Table.put(0.95449,1.69);
		Table.put(0.95543,1.7);
		Table.put(0.95637,1.71);
		Table.put(0.95728,1.72);
		Table.put(0.95818,1.73);
		Table.put(0.95907,1.74);
		Table.put(0.95994,1.75);
		Table.put(0.9608,1.76);
		Table.put(0.96164,1.77);
		Table.put(0.96246,1.78);
		Table.put(0.96327,1.79);
		Table.put(0.96407,1.8);
		Table.put(0.96485,1.81);
		Table.put(0.96562,1.82);
		Table.put(0.96638,1.83);
		Table.put(0.96712,1.84);
		Table.put(0.96784,1.85);
		Table.put(0.96856,1.86);
		Table.put(0.96926,1.87);
		Table.put(0.96995,1.88);
		Table.put(0.97062,1.89);
		Table.put(0.97128,1.9);
		Table.put(0.97193,1.91);
		Table.put(0.97257,1.92);
		Table.put(0.9732,1.93);
		Table.put(0.97381,1.94);
		Table.put(0.97441,1.95);
		Table.put(0.975,1.96);
		Table.put(0.97558,1.97);
		Table.put(0.97615,1.98);
		Table.put(0.9767,1.99);
		Table.put(0.97725,2.0);
		Table.put(0.97778,2.01);
		Table.put(0.97831,2.02);
		Table.put(0.97882,2.03);
		Table.put(0.97932,2.04);
		Table.put(0.97982,2.05);
		Table.put(0.9803,2.06);
		Table.put(0.98077,2.07);
		Table.put(0.98124,2.08);
		Table.put(0.98169,2.09);
		Table.put(0.98214,2.1);
		Table.put(0.98257,2.11);
		Table.put(0.983,2.12);
		Table.put(0.98341,2.13);
		Table.put(0.98382,2.14);
		Table.put(0.98422,2.15);
		Table.put(0.98461,2.16);
		Table.put(0.985,2.17);
		Table.put(0.98537,2.18);
		Table.put(0.98574,2.19);
		Table.put(0.9861,2.2);
		Table.put(0.98645,2.21);
		Table.put(0.98679,2.22);
		Table.put(0.98713,2.23);
		Table.put(0.98745,2.24);
		Table.put(0.98778,2.25);
		Table.put(0.98809,2.26);
		Table.put(0.9884,2.27);
		Table.put(0.9887,2.28);
		Table.put(0.98899,2.29);
		Table.put(0.98928,2.3);
		Table.put(0.98956,2.31);
		Table.put(0.98983,2.32);
		Table.put(0.9901,2.33);
		Table.put(0.99036,2.34);
		Table.put(0.99061,2.35);
		Table.put(0.99086,2.36);
		Table.put(0.99111,2.37);
		Table.put(0.99134,2.38);
		Table.put(0.99158,2.39);
		Table.put(0.9918,2.4);
		Table.put(0.99202,2.41);
		Table.put(0.99224,2.42);
		Table.put(0.99245,2.43);
		Table.put(0.99266,2.44);
		Table.put(0.99286,2.45);
		Table.put(0.99305,2.46);
		Table.put(0.99324,2.47);
		Table.put(0.99343,2.48);
		Table.put(0.99361,2.49);
		Table.put(0.99379,2.5);
		Table.put(0.99396,2.51);
		Table.put(0.99413,2.52);
		Table.put(0.9943,2.53);
		Table.put(0.99446,2.54);
		Table.put(0.99461,2.55);
		Table.put(0.99477,2.56);
		Table.put(0.99492,2.57);
		Table.put(0.99506,2.58);
		Table.put(0.9952,2.59);
		Table.put(0.99534,2.6);
		Table.put(0.99547,2.61);
		Table.put(0.9956,2.62);
		Table.put(0.99573,2.63);
		Table.put(0.99585,2.64);
		Table.put(0.99598,2.65);
		Table.put(0.99609,2.66);
		Table.put(0.99621,2.67);
		Table.put(0.99632,2.68);
		Table.put(0.99643,2.69);
		Table.put(0.99653,2.7);
		Table.put(0.99664,2.71);
		Table.put(0.99674,2.72);
		Table.put(0.99683,2.73);
		Table.put(0.99693,2.74);
		Table.put(0.99702,2.75);
		Table.put(0.99711,2.76);
		Table.put(0.9972,2.77);
		Table.put(0.99728,2.78);
		Table.put(0.99736,2.79);
		Table.put(0.99744,2.8);
		Table.put(0.99752,2.81);
		Table.put(0.9976,2.82);
		Table.put(0.99767,2.83);
		Table.put(0.99774,2.84);
		Table.put(0.99781,2.85);
		Table.put(0.99788,2.86);
		Table.put(0.99795,2.87);
		Table.put(0.99801,2.88);
		Table.put(0.99807,2.89);
		Table.put(0.99813,2.9);
		Table.put(0.99819,2.91);
		Table.put(0.99825,2.92);
		Table.put(0.99831,2.93);
		Table.put(0.99836,2.94);
		Table.put(0.99841,2.95);
		Table.put(0.99846,2.96);
		Table.put(0.99851,2.97);
		Table.put(0.99856,2.98);
		Table.put(0.99861,2.99);
		Table.put(0.99865,3.0);
		Table.put(0.99869,3.01);
		Table.put(0.99874,3.02);
		Table.put(0.99878,3.03);
		Table.put(0.99882,3.04);
		Table.put(0.99886,3.05);
		Table.put(0.99889,3.06);
		Table.put(0.99893,3.07);
		Table.put(0.99896,3.08);
		Table.put(0.999,3.09);
		Table.put(0.99903,3.1);
		Table.put(0.99906,3.11);
		Table.put(0.9991,3.12);
		Table.put(0.99913,3.13);
		Table.put(0.99916,3.14);
		Table.put(0.99918,3.15);
		Table.put(0.99921,3.16);
		Table.put(0.99924,3.17);
		Table.put(0.99926,3.18);
		Table.put(0.99929,3.19);
		Table.put(0.99931,3.2);
		Table.put(0.99934,3.21);
		Table.put(0.99936,3.22);
		Table.put(0.99938,3.23);
		Table.put(0.9994,3.24);
		Table.put(0.99942,3.25);
		Table.put(0.99944,3.26);
		Table.put(0.99946,3.27);
		Table.put(0.99948,3.28);
		Table.put(0.9995,3.29);
		Table.put(0.99952,3.3);
		Table.put(0.99953,3.31);
		Table.put(0.99955,3.32);
		Table.put(0.99957,3.33);
		Table.put(0.99958,3.34);
		Table.put(0.9996,3.35);
		Table.put(0.99961,3.36);
		Table.put(0.99962,3.37);
		Table.put(0.99964,3.38);
		Table.put(0.99965,3.39);
		Table.put(0.99966,3.4);
		Table.put(0.99968,3.41);
		Table.put(0.99969,3.42);
		Table.put(0.9997,3.43);
		Table.put(0.99971,3.44);
		Table.put(0.99972,3.45);
		Table.put(0.99973,3.46);
		Table.put(0.99974,3.47);
		Table.put(0.99975,3.48);
		Table.put(0.99976,3.49);
		Table.put(0.99977,3.5);
		Table.put(0.99978,3.51);
		Table.put(0.99978,3.52);
		Table.put(0.99979,3.53);
		Table.put(0.9998,3.54);
		Table.put(0.99981,3.55);
		Table.put(0.99981,3.56);
		Table.put(0.99982,3.57);
		Table.put(0.99983,3.58);
		Table.put(0.99983,3.59);
		Table.put(0.99984,3.6);
		Table.put(0.99985,3.61);
		Table.put(0.99985,3.62);
		Table.put(0.99986,3.63);
		Table.put(0.99986,3.64);
		Table.put(0.99987,3.65);
		Table.put(0.99987,3.66);
		Table.put(0.99988,3.67);
		Table.put(0.99988,3.68);
		Table.put(0.99989,3.69);
		Table.put(0.99989,3.7);
		Table.put(0.9999,3.71);
		Table.put(0.9999,3.72);
		Table.put(0.9999,3.73);
		Table.put(0.99991,3.74);
		Table.put(0.99991,3.75);
		Table.put(0.99992,3.76);
		Table.put(0.99992,3.77);
		Table.put(0.99992,3.78);
		Table.put(0.99992,3.79);
		Table.put(0.99993,3.8);
		Table.put(0.99993,3.81);
		Table.put(0.99993,3.82);
		Table.put(0.99994,3.83);
		Table.put(0.99994,3.84);
		Table.put(0.99994,3.85);
		Table.put(0.99994,3.86);
		Table.put(0.99995,3.87);
		Table.put(0.99995,3.88);
		Table.put(0.99995,3.89);
		Table.put(0.99995,3.9);
		Table.put(0.99995,3.91);
		Table.put(0.99996,3.92);
		Table.put(0.99996,3.93);
		Table.put(0.99996,3.94);
		Table.put(0.99996,3.95);
		Table.put(0.99996,3.96);
		Table.put(0.99996,3.97);
		Table.put(0.99997,3.98);
		Table.put(0.99997,3.99);
		Table.put(0.99997,4.0);
	}
}
